from django.shortcuts import render, redirect
from django.contrib.auth.models import Group

def index(request):
    context = {
        'titulo': 'Catálogo de Vehículos',
        'vehiculos': data_vehiculos,
    }

    if request.user.is_authenticated:
        # Filtra los grupos del usuario por nombre
        user_groups = request.user.groups.filter(name__in=['Usuarios_crud', 'Usuarios_std'])
        if user.is_superuser:
		allowed_urls = ['/', '/listar', '/vehiculos/add', '/update', '/delete', '/usuarios']
        	if user_groups:  # Comprueba si hay grupos
            		if user_groups.filter(name='Usuarios_crud').exists():
                		allowed_urls = ['/', '/listar', '/vehiculos/add', '/update', '/delete']
            			if user_groups.filter(name='Usuarios_std').exists():
	                		allowed_urls = ['/', '/listar']
        			else:  # Usuario sin grupo
            				allowed_urls = ['/', '/listar'] 
            				#context['no_permissions_message'] = 'Tu cuenta no tiene permisos asignados.'  # Opcional, mensaje de alerta
        			context['allowed_urls'] = allowed_urls
    		else:
        		context['allowed_urls'] = ['/']

    return render(request, 'index.html', context)