# EDITAR VEHICULO

class VehiculoUpdateView(LoginRequiredMixin, PermissionRequiredMixin, UpdateView):
    model = Vehiculo
    template_name = "vehiculos/update_vehiculo.html"
    fields = ['marca', 'modelo', 'serial_carroceria', 'serial_motor', 'categoria', 'year', 'descripcion', 'precio']
    
    success_url = reverse_lazy('listar')
    permission_required = 'vehiculo.can_edit_vehiculo'
    
    def handle_no_permission(self):
        if self.request.user.is_authenticated:
            messages.error(self.request, "No dispone de permisos para eliminar registros.")
            return redirect("index")
        
        else:
            messages.info(self.request, "Para editar un registro, primero inicie sesi√≥n.")
            return redirect("login_view")
    

